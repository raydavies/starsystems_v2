function TestimonialsManager(t){var e=this,a=t.find("#testimonial_filters"),i=t.find("#testimonial_list");this.init=function(){$('[data-toggle="tooltip"]').tooltip(),a.on("click.filter",'a[role="tab"]',e.filterTestimonials),i.on("click.toggle",".activation-toggle-switch input",function(){var t=$(this).closest(".testimonial").attr("id"),a=parseInt(t.substring(12),10);e.toggleActiveStatus(a)}),i.on("click.delete",".delete-button",function(){var t=$(this).closest(".testimonial").attr("id"),a=parseInt(t.substring(12),10);e.deleteTestimonial(a)})},this.toggleActiveStatus=function(t){var e;$.ajax({url:"/admin/testimonials/"+t+"/toggle-status",dataType:"json",type:"post",error:function(t,e,a){console.log(a)},success:function(i){i.data&&(e=$("#testimonial-"+t),e.find(".activation-toggle-switch"),parseInt(i.data.flag_active,10)?e.removeClass("panel-danger").addClass("panel-success"):e.removeClass("panel-success").addClass("panel-danger"),a.find("li.active > a").trigger("click.filter"))}})},this.filterTestimonials=function(){var t=$(this).data("status"),e=i.find(".testimonial");1===t?e.each(function(t,e){var a=$(e),i=a.closest(".testimonial-wrapper");a.find('input[name="flag_active"]').prop("checked")?i.removeClass("hidden"):i.addClass("hidden")}):0===t?e.each(function(t,e){var a=$(e),i=a.closest(".testimonial-wrapper");a.find('input[name="flag_active"]').prop("checked")?i.addClass("hidden"):i.removeClass("hidden")}):e.each(function(t,e){$(e).closest(".testimonial-wrapper").removeClass("hidden")})},this.deleteTestimonial=function(t){var e;confirm("Are you sure you want to delete this testimonial?")&&$.ajax({url:"/admin/testimonials/"+t+"/delete",dataType:"json",type:"post",error:function(t,e,a){console.log(a)},success:function(a){a.data&&a.data.deleted===t&&(e=$("#testimonial-"+t),e.closest(".testimonial-wrapper").remove())}})}}$(document).ready(function(){new TestimonialsManager($("#testimonial_manager")).init()});var FormManager=function(t,e){var a=this,i=(e=e||{first_name:"validName",last_name:"validName",email:"validEmail",subject:"validAlphaNum",message:"validInput"},{"email:validEmail":"The email field must contain a valid email address"}),n={};this.init=function(){t.data("validateOnStart")&&a.validateForm(),t.on("change",".form-control",function(){a.validateInput($(this))}),t.on("submit",a.validateForm)},this.validateForm=function(){var e=!0;return t.find(".form-group").each(function(){a.validateInput($(this).find(".form-control"))||(e=!1)}),e},this.validateInput=function(t){var s,o,l,r,c=t.attr("name");return n[c]="",s=e[c]?e[c]:"validInput",a[s](c,t.val())?(a.setSuccessStatus(t),o=!0):(n[c]&&(r=n[c],i[c+":"+r]&&(l=i[c+":"+r])),a.setErrorStatus(t,l),o=!1),o},this.setSuccessStatus=function(t){t.siblings(".form-control-feedback").removeClass("fa-close hidden").addClass("fa-check"),t.siblings("span.sr-only").removeClass("hidden").text("(success)"),t.closest(".form-group").removeClass("has-error").addClass("has-success").find(".errormsg").empty()},this.setErrorStatus=function(t,e){var a=t.attr("name").replace(/[-_]+/," ");e=e||"The "+a+" field is required";t.siblings(".form-control-feedback").removeClass("fa-check hidden").addClass("fa-close"),t.siblings("span.sr-only").removeClass("hidden").text("(error)"),t.closest(".form-group").removeClass("has-success").addClass("has-error").find(".errormsg").text(e)},this.validInput=function(t,e){return""!=a.trimSpace(e)},this.validName=function(t,e){if(a.validInput(t,e)){if(e.length<=255)return!0;n[t]="validName"}return!1},this.validAlphaNum=function(t,e){if(a.validInput(t,e)){if(e.match(/^[a-zA-Z0-9\-\_ ]+$/))return!0;n[t]="validAlphaNum"}return!1},this.validEmail=function(t,e){if(a.validInput(t,e)){if(e.match(/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/))return!0;n[t]="validEmail"}return!1},this.validStateAbbr=function(t,e){if(a.validInput(t,e)){if(e.match(/^[a-zA-Z]{2}$/))return!0;n[t]="validStateAbbr"}return!1},this.noValidate=function(t,e){return!0},this.trimSpace=function(t){return t.replace(/^\s+|\s+$/g,"")}};function showScrollButton(){var t=$("body").height()/4;$(document).scrollTop()>=t?$(".scroll-btn").removeClass("hidden"):$(".scroll-btn").addClass("hidden")}function scrollToTop(t){t=parseInt(t,10);$("html, body").animate({scrollTop:0},t)}$(document).ready(function(){$(window).bind("scroll",function(){showScrollButton()}),$("a[href=#top]").bind("click",function(t){t.preventDefault(),scrollToTop(1e3)}),showScrollButton()});
