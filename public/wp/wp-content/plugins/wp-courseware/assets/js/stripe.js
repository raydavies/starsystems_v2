!function(e){var r={};function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(o,n,function(r){return e[r]}.bind(null,n));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/",t(t.s=7)}({7:function(e,r,t){e.exports=t("Zjkr")},Zjkr:function(e,r,t){(function(e){e(function(e){"use strict";if("undefined"!=typeof wpcw_stripe_params){var r,t,o,n=Stripe(wpcw_stripe_params.key),s=wpcw_stripe_params.elements_options.length?wpcw_stripe_params.elements_options:{},i=n.elements(s),c={form:e("form.wpcw-checkout-form"),stripe_submit:!1,stripe_checkout_submit:!1,init:function(){this.form.on("checkout_stripe",this.on_submit),this.form.on("change",this.reset),e(document).on("stripeError",this.on_error),"yes"===wpcw_stripe_params.is_stripe_checkout?(e(document.body).on("validated_checkout",this.open_stripe_checkout_modal_after_validation),e(document.body).on("click","#wpcw-place-order",function(){if("wpcw-payment-method-stripe"===e('.wpcw-checkout-form input[name="payment_method"]:checked').attr("id"))return e(document.body).trigger("validate_checkout"),!1})):c.create_stripe_elements()},create_stripe_elements:function(){var n={base:{iconColor:"#666EE8",color:"#31325F",fontSize:"15px","::placeholder":{color:"#CFD7E0"}}},s={focus:"focused",empty:"empty",invalid:"invalid"};n=wpcw_stripe_params.elements_styling?wpcw_stripe_params.elements_styling:n,s=wpcw_stripe_params.elements_classes?wpcw_stripe_params.elements_classes:s,"yes"===wpcw_stripe_params.inline_cc_form?(r=i.create("card",{style:n,hidePostalCode:!0})).addEventListener("change",function(r){c.on_cc_form_change(),r.error&&e(document.body).trigger("stripeError",r)}):(r=i.create("cardNumber",{style:n,classes:s}),t=i.create("cardExpiry",{style:n,classes:s}),o=i.create("cardCvc",{style:n,classes:s}),r.addEventListener("change",function(r){c.on_cc_form_change(),c.update_card_brand(r.brand),r.error&&e(document.body).trigger("stripeError",r)}),t.addEventListener("change",function(r){c.on_cc_form_change(),r.error&&e(document.body).trigger("stripeError",r)}),o.addEventListener("change",function(r){c.on_cc_form_change(),r.error&&e(document.body).trigger("stripeError",r)})),"yes"===wpcw_stripe_params.is_checkout&&e(document.body).on("updated_checkout",function(){r&&c.unmount_stripe_elements(),c.mount_stripe_elements()})},mount_stripe_elements:function(){e("#wpcw-stripe-card-element").length&&("yes"===wpcw_stripe_params.inline_cc_form?r.mount("#wpcw-stripe-card-element"):(r.mount("#wpcw-stripe-card-element"),t.mount("#wpcw-stripe-exp-element"),o.mount("#wpcw-stripe-cvc-element")))},unmount_stripe_elements:function(){"yes"===wpcw_stripe_params.inline_cc_form?r.unmount("#wpcw-stripe-card-element"):(r.unmount("#wpcw-stripe-card-element"),t.unmount("#wpcw-stripe-exp-element"),o.unmount("#wpcw-stripe-cvc-element"))},update_card_brand:function(r){var t={visa:"wpcw-stripe-visa-brand",mastercard:"wpcw-stripe-mastercard-brand",amex:"wpcw-stripe-amex-brand",discover:"wpcw-stripe-discover-brand",diners:"wpcw-stripe-diners-brand",jcb:"wpcw-stripe-jcb-brand",unknown:"wpcw-stripe-cc-unknown-brand"},o=e(".wpcw-stripe-cc-brand"),n="wpcw-stripe-cc-unknown-brand";r in t&&(n=t[r]),e.each(t,function(e,r){o.removeClass(r)}),o.addClass(n)},on_cc_form_change:function(){c.reset()},get_selected_payment_element:function(){return e('.wpcw-payment-methods input[name="payment_method"]:checked')},is_stripe_chosen:function(){return e("#wpcw-payment-method-stripe").is(":checked")},is_stripe_card_chosen:function(){return e("#wpcw-payment-method-stripe").is(":checked")},has_source:function(){return 0<e("input.stripe-source").length},is_stripe_modal_needed:function(e){var r=c.form.find("input.stripe_token");return(!c.stripe_submit||!r)&&!!c.is_stripe_chosen()},open_stripe_checkout_modal_after_validation:function(e){e.validated&&c.open_stripe_checkout_modal()},open_stripe_checkout_modal:function(){var r=c.form,t=e("#wpcw-stripe-payment-data");c.reset();StripeCheckout.open({key:wpcw_stripe_params.key,billingAddress:t.data("billing-address"),zipCode:t.data("verify-zip"),amount:t.data("amount"),name:t.data("name"),description:t.data("description"),currency:t.data("currency"),image:t.data("image"),bitcoin:t.data("bitcoin"),locale:t.data("locale"),email:t.data("email"),panelLabel:t.data("panel-label"),allowRememberMe:t.data("allow-remember-me"),token:function(e){if(r.find("input.stripe_source").remove(),"token"===e.object)n.createSource({type:"card",token:e.id}).then(c.source_response);else if("source"===e.object){var t={source:e};c.source_response(t)}},closed:c.on_stripe_checkout_modal_close()})},reset_stripe_checkout_modal:function(){c.reset(),c.stripe_checkout_submit=!1},on_stripe_checkout_modal_close:function(){c.unblock()},get_owner_details:function(){var r=e("#first_name").length?e("#first_name").val():wpcw_stripe_params.billing_first_name,t=e("#last_name").length?e("#last_name").val():wpcw_stripe_params.billing_last_name,o={owner:{name:"",address:{},email:"",phone:""}};return o.owner.name=r,r&&t&&(o.owner.name=r+" "+t),o.owner.email=e("#email").val(),void 0!==o.owner.phone&&0>=o.owner.phone.length&&delete o.owner.phone,void 0!==o.owner.email&&0>=o.owner.email.length&&delete o.owner.email,void 0!==o.owner.name&&0>=o.owner.name.length&&delete o.owner.name,e("#billing_address_1").length>0?(o.owner.address.line1=e("#billing_address_1").val(),o.owner.address.line2=e("#billing_address_2").val(),o.owner.address.state=e("#billing_state").val(),o.owner.address.city=e("#billing_city").val(),o.owner.address.postal_code=e("#billing_postcode").val(),o.owner.address.country=e("#billing_country").val()):wpcw_stripe_params.billing_address_1&&(o.owner.address.line1=wpcw_stripe_params.billing_address_1,o.owner.address.line2=wpcw_stripe_params.billing_address_2,o.owner.address.state=wpcw_stripe_params.billing_state,o.owner.address.city=wpcw_stripe_params.billing_city,o.owner.address.postal_code=wpcw_stripe_params.billing_postcode,o.owner.address.country=wpcw_stripe_params.billing_country),o},create_source:function(){var e=c.get_owner_details();n.createSource(r,e).then(c.source_response)},source_response:function(r){r.error?e(document.body).trigger("stripeError",r):"no"===wpcw_stripe_params.allow_prepaid_card&&"card"===r.source.type&&"prepaid"===r.source.card.funding?(r.error={message:wpcw_stripe_params.no_prepaid_card_msg},"yes"===wpcw_stripe_params.is_stripe_checkout?c.submit_error('<div class="wpcw-notice wpcw-notice-error">'+wpcw_stripe_params.no_prepaid_card_msg+"</div>"):e(document.body).trigger("stripeError",r)):c.process_stripe_response(r.source)},process_stripe_response:function(r){c.reset(),c.form.append("<input type='hidden' class='stripe-source' name='stripe_source' value='"+r.id+"'/>"),e("form#add_payment_method").length&&e(c.form).off("submit",c.form.on_submit()),c.form.submit()},on_submit:function(e){if(c.is_stripe_chosen())return c.has_source()?void 0:(e.preventDefault(),c.block(),"yes"===wpcw_stripe_params.is_stripe_checkout&&c.is_stripe_modal_needed()&&c.is_stripe_card_chosen()?"yes"===wpcw_stripe_params.is_checkout||(c.open_stripe_checkout_modal(),!1):(c.create_source(),!1))},reset:function(){e(".wpcw-stripe-error, .wpcw-notice-error, .stripe-source, .stripe_token").remove(),"yes"===wpcw_stripe_params.is_stripe_checkout&&(c.stripe_submit=!1)},is_mobile:function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},block:function(){c.is_mobile()||c.form.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){c.form.unblock()},on_error:function(r,t){var o=t.error.message,n=c.get_selected_payment_element().parents("li").eq(0).find(".wpcw-stripe-card-errors");"invalid_request_error"!==t.error.type&&"api_connection_error"!==t.error.type&&"api_error"!==t.error.type&&"authentication_error"!==t.error.type&&"rate_limit_error"!==t.error.type||(o=wpcw_stripe_params.invalid_request_error),"card_error"===t.error.type&&wpcw_stripe_params.hasOwnProperty(t.error.code)&&(o=wpcw_stripe_params[t.error.code]),"validation_error"===t.error.type&&wpcw_stripe_params.hasOwnProperty(t.error.code)&&(o=wpcw_stripe_params[t.error.code]),c.reset(),e(".wpcw-notice-group-checkout").remove(),console.log(t.error.message),e(n).html('<div class="wpcw-notice-group wpcw-notice-group-checkout wpcw-stripe-error"><div class="wpcw-notice wpcw-notice-error">'+o+"</div></div>"),e(".wpcw-stripe-error").length&&e("html, body").animate({scrollTop:e(".wpcw-stripe-error").offset().top-200},200),c.unblock()},submit_error:function(r){e(".wpcw-notice-group-checkout, .wpcw-notice-error, .wpcw-message").remove(),c.form.prepend('<div class="wpcw-notice-group wpcw-notice-group-checkout wpcw-stripe-error">'+r+"</div>"),c.form.removeClass("processing").unblock(),c.form.find(".input-text, .wpcw-input-text, select, input:checkbox").blur(),c.scroll_to_notices(),e(document.body).trigger("checkout_error"),c.unblock()},scroll_to_notices:function(){var r=e(".wpcw-notice-group-checkout"),t="scrollBehavior"in document.documentElement.style;r.length||(r=e("form.wpcw-checkout-form")),r.length&&(t?r[0].scrollIntoView({behavior:"smooth"}):e("html, body").animate({scrollTop:r.offset().top-100},1e3))},get_ajax_api_url:function(e){return wpcw_stripe_params.ajax_api_url.toString().replace("%%endpoint%%",e)},ajax_api_before_send:function(e){e.setRequestHeader("WPCW-WP-Nonce",wpcw_stripe_params.ajax_api_nonce)}};c.init()}})}).call(this,t("xeH2"))},xeH2:function(e,r){e.exports=jQuery}});